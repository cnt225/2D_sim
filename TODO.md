# π“‹ TODO: SE(3) Riemannian Flow Matching ν”„λ΅μ νΈ

**λ§μ§€λ§‰ μ—…λ°μ΄νΈ**: 2024λ…„ (μ—°κµ¬μ‹¤ μ„λ²„ μ΄κ΄€ μ¤€λΉ„ μ™„λ£)

---

## β… μ™„λ£λ μ‘μ—…

### **λ°μ΄ν„° μƒμ„± νμ΄ν”„λΌμΈ** β…
- [x] **ν™κ²½ μƒμ„±**: 10,000κ° μ›ν• μ¥μ• λ¬Ό ν¬μΈνΈν΄λΌμ°λ“ ν™κ²½
- [x] **ν¬μ¦ νμ–΄ μƒμ„±**: κ° ν™κ²½λ³„ 10κ° ν¬μ¦, μ΄ 100,000κ° νμ–΄
- [x] **RRT κ¶¤μ  μƒμ„±**: μ²« 100κ° ν™κ²½, collision margin 0.05m
- [x] **B-spline μ¤λ¬΄λ”©**: SE(2) λ§¤λ‹ν΄λ“ κΈ°λ°, 2x λ°€λ„, 90-100% κ°μ„ 
- [x] **μ¶©λ κ²€μ¦**: RRT + Post-B-spline μ¶©λ μ²΄ν¬ μ™„λ£
- [x] **μ‹κ°ν™” μ‹μ¤ν…**: μ‹¤μ  λ΅λ΄‡ μ§€μ¤λ©”νΈλ¦¬ λ°μ (1.2Γ—0.4m)

### **SE(3) RFM λ¨λΈ κµ¬ν„** β…
- [x] **SE3RFM μ•„ν‚¤ν…μ²**: fm-main μ¤νƒ€μΌ Riemannian Flow Matching
- [x] **3D Point Cloud Encoder**: DGCNN κΈ°λ°, 1024Dβ†’2048D μ¶λ ¥
- [x] **SE(3) Encoder**: 4Γ—4 λ³€ν™ν–‰λ ¬ β†’ 12D μ§μ ‘ ν”λνΌ
- [x] **Geometry Encoder**: νƒ€μ›μ²΄ νλΌλ―Έν„° β†’ 32D μ„λ² λ”©
- [x] **Velocity Field Network**: 2105D β†’ 6D twist λ²΅ν„°
- [x] **SE(3) Utilities**: exp_map, log_map, compose, inverse κµ¬ν„
- [x] **ODE Solver**: Euler, RK4, Adaptive μ λ¶„κΈ°
- [x] **Loss Functions**: Flow matching + collision + regularization
- [x] **Training Infrastructure**: Wandb, λ¶„μ‚° ν›λ ¨, μ„¤μ • κ΄€λ¦¬

### **μ½”λ“ μ •λ¦¬ λ° λ¬Έμ„ν™”** β…
- [x] **λ””λ ‰ν† λ¦¬ κµ¬μ΅° ν†µμΌ**: fm-main μ¤νƒ€μΌ (loaders, losses, trainers)
- [x] **B-spline μ½”λ“ μ •λ¦¬**: λ‹¨μΌ μ¤ν¬λ¦½νΈλ΅ ν†µν•©
- [x] **λ¨λΈ μ•„ν‚¤ν…μ² λ¬Έμ„ν™”**: README, progress.md μ—…λ°μ΄νΈ
- [x] **Git μ¤€λΉ„**: .gitignore μ„¤μ •, λ°μ΄ν„° νμΌ μ μ™Έ

---

## π”„ μ§„ν–‰ μ¤‘μΈ μ‘μ—…

### **μ—°κµ¬μ‹¤ μ„λ²„ μ΄κ΄€ μ¤€λΉ„** (ν„μ¬)
- [x] **README.md μ—…λ°μ΄νΈ**: ν™κ²½ μ„¤μ •, λ°μ΄ν„° ν„ν™©, μ‚¬μ©λ²•
- [x] **TODO.md μ‘μ„±**: ν„μ¬ μƒν™© λ° λ‹¤μ λ‹¨κ³„ λ…μ‹
- [x] **.gitignore μ„¤μ •**: λ°μ΄ν„°/κ²°κ³Ό νμΌ μ μ™Έ
- [x] **pyproject.toml μ—…λ°μ΄νΈ**: ν”„λ΅μ νΈ μ„¤λ… μµμ‹ ν™”
- [ ] **Git push**: μ½”λ“λ§ μ—°κµ¬μ‹¤ μ„λ²„λ΅ μ „μ†΅
- [ ] **Ubuntu ν™κ²½ μ„¤μ •**: UV μ„¤μΉ, μμ΅΄μ„± μ„¤μΉ

---

## π― λ‹¤μ λ‹¨κ³„ (μ—°κµ¬μ‹¤ μ„λ²„μ—μ„ μ§„ν–‰)

### **Phase 1: λ¨λΈ ν›λ ¨ μ¤€λΉ„** (μ°μ„ μμ„ 1)
- [ ] **ν™κ²½ κ²€μ¦**: Ubuntuμ—μ„ ν¨ν‚¤μ§€ μ„¤μΉ λ° μ„ν¬νΈ ν™•μΈ
  ```bash
  cd packages/rfm_policy
  python test_se3_rfm.py  # λ¨λΈ λ΅λ“ λ° forward pass ν…μ¤νΈ
  ```

- [ ] **λ°μ΄ν„° λ΅λ” ν…μ¤νΈ**: 100κ° κ¶¤μ μΌλ΅ λ°μ΄ν„° λ΅λ”© ν™•μΈ
  ```bash
  python loaders/se3_trajectory_dataset.py  # λ°μ΄ν„°μ…‹ λ΅λ”© ν…μ¤νΈ
  ```

- [ ] **ν›λ ¨ μ„¤μ • μ΅°μ •**: RTX 4090 ν™κ²½μ— λ§κ² ν•μ΄νΌνλΌλ―Έν„° μ΅°μ •
  - Batch size, learning rate, GPU λ©”λ¨λ¦¬ μµμ ν™”
  - Wandb ν”„λ΅μ νΈ μ„¤μ •

### **Phase 2: μ†κ·λ¨ ν›λ ¨ μ‹¤ν—** (μ°μ„ μμ„ 2)
- [ ] **Proof of Concept**: 100κ° κ¶¤μ μΌλ΅ λ¨λΈ μλ ΄ ν™•μΈ
  ```bash
  python train_se3_rfm.py --config configs/se3_rfm_config.yaml --debug
  ```

- [ ] **Loss λ¨λ‹ν„°λ§**: Flow matching loss μλ ΄ μ—¬λ¶€ ν™•μΈ
- [ ] **Overfitting ν…μ¤νΈ**: λ‹¨μΌ κ¶¤μ μ— λ¨λΈ μ¤λ²„ν”Όν… κ°€λ¥ν•μ§€ ν™•μΈ
- [ ] **μ„±λ¥ λ²¤μΉλ§ν¬**: μ¶”λ΅  μ†λ„, λ©”λ¨λ¦¬ μ‚¬μ©λ‰ μΈ΅μ •

### **Phase 3: λ°μ΄ν„° μ¤μΌ€μΌλ§** (μ°μ„ μμ„ 3)
- [ ] **1,000κ° ν™κ²½**: λ‹¤μ 900κ° ν™κ²½μ— λ€ν•΄ RRT + B-spline μƒμ„±
  ```bash
  cd packages/data_generator/reference_planner
  python generate_range_1000.py  # ν™κ²½ 000100-000999
  ```

- [ ] **10,000κ° ν™κ²½**: μ „μ²΄ λ°μ΄ν„°μ…‹ μ™„μ„±
  ```bash
  python generate_all_10k.py  # λ‚λ¨Έμ§€ 9,000κ° ν™κ²½
  ```

- [ ] **λ°μ΄ν„° κ²€μ¦**: μ¶©λ μ²΄ν¬, κ¶¤μ  ν’μ§ ν™•μΈ
- [ ] **λ°μ΄ν„° λ¶„ν• **: Train/Validation/Test split (8:1:1)

### **Phase 4: λ€κ·λ¨ ν›λ ¨** (μ°μ„ μμ„ 4)
- [ ] **λ¶„μ‚° ν›λ ¨ μ„¤μ •**: Multi-GPU ν›λ ¨ (if available)
- [ ] **ν•μ΄νΌνλΌλ―Έν„° νλ‹**: Learning rate, batch size, regularization
- [ ] **λ¨λΈ λΉ„κµ**: λ‹¤μ–‘ν• μ•„ν‚¤ν…μ² μ‹¤ν—
- [ ] **μλ ΄ λ¶„μ„**: Loss curves, validation metrics

### **Phase 5: ν‰κ°€ λ° λ²¤μΉλ§ν‚Ή** (μ°μ„ μμ„ 5)
- [ ] **RRT vs RFM λΉ„κµ**: μ„±λ¥, μ†λ„, κ¶¤μ  ν’μ§
- [ ] **μ¶©λ νν”Όμ¨**: ν…μ¤νΈμ…‹μ—μ„ μ•μ „μ„± ν‰κ°€
- [ ] **μ‹¤μ‹κ°„ μ„±λ¥**: μ¶”λ΅  μ†λ„ λ²¤μΉλ§ν¬
- [ ] **μΌλ°ν™” μ„±λ¥**: μƒλ΅μ΄ ν™κ²½μ—μ„ ν…μ¤νΈ

---

## π“ λ°μ΄ν„° ν„ν™© (Mac λ΅μ»¬ β†’ μ„λ²„ μ΄κ΄€ μμ •)

### **μ™„λ£λ λ°μ΄ν„°**
```
data/
β”β”€β”€ pointcloud/circle_envs_10k/         # 10,000κ° ν™κ²½ (μ™„λ£)
β”β”€β”€ pose_pairs/circle_envs_10k/         # 100,000κ° ν¬μ¦ νμ–΄ (μ™„λ£)
β”β”€β”€ trajectories/
β”‚   β”β”€β”€ circle_envs_10k/                # 100κ° RRT κ¶¤μ  (μ™„λ£)
β”‚   β””β”€β”€ circle_envs_10k_bsplined/       # 100κ° B-spline κ¶¤μ  (μ™„λ£)
β””β”€β”€ visualizations/                     # ν…μ¤νΈ μ‹κ°ν™” νμΌλ“¤
```

### **ν•„μ”ν• λ°μ΄ν„° (μ„λ²„μ—μ„ μƒμ„±)**
- **900κ° μ¶”κ°€ RRT + B-spline**: ν™κ²½ 000100-000999
- **9,000κ° μµμΆ… λ°μ΄ν„°**: ν™κ²½ 001000-009999
- **Train/Val/Test λ¶„ν• **: μ²΄κ³„μ μΈ λ°μ΄ν„° κ΄€λ¦¬

---

## π› οΈ μ„λ²„ μ„¤μ • κ°€μ΄λ“

### **1. ν”„λ΅μ νΈ ν΄λ΅  λ° ν™κ²½ μ„¤μ •**
```bash
# ν”„λ΅μ νΈ ν΄λ΅ 
git clone <repository_url>
cd 2d_sim

# UV μ„¤μΉ (if needed)
curl -LsSf https://astral.sh/uv/install.sh | sh
source ~/.bashrc

# κ°€μƒν™κ²½ μƒμ„±
uv venv
source .venv/bin/activate

# μμ΅΄μ„± μ„¤μΉ
uv sync
```

### **2. λ°μ΄ν„° μ „μ†΅** (Mac β†’ μ„λ²„)
```bash
# λ΅μ»¬ (Mac)μ—μ„
rsync -avz --progress data/ server:~/2d_sim/data/
```

### **3. ν™κ²½ κ²€μ¦**
```bash
# λ¨λΈ λ΅λ“ ν…μ¤νΈ
cd packages/rfm_policy
python test_se3_rfm.py

# GPU ν™•μΈ
python -c "import torch; print(torch.cuda.is_available())"
```

---

## π― μ„±κ³µ κΈ°μ¤€

### **λ‹¨κΈ° λ©ν‘ (1-2μ£Ό)**
- [ ] μ„λ²„ ν™κ²½ μ„¤μ • μ™„λ£
- [ ] 100κ° λ°μ΄ν„°λ΅ λ¨λΈ μλ ΄ ν™•μΈ
- [ ] Wandb λ΅κΉ… μ •μƒ μ‘λ™

### **μ¤‘κΈ° λ©ν‘ (1κ°μ›”)**
- [ ] 1,000κ° λ°μ΄ν„° μƒμ„± μ™„λ£
- [ ] μ•μ •μ μΈ ν›λ ¨ νμ΄ν”„λΌμΈ κµ¬μ¶•
- [ ] κΈ°λ³Έ μ„±λ¥ λ²¤μΉλ§ν¬ μ™„λ£

### **μ¥κΈ° λ©ν‘ (2-3κ°μ›”)**
- [ ] 10,000κ° μ™„μ „ λ°μ΄ν„°μ…‹ ν›λ ¨
- [ ] RRT λ€λΉ„ μ„±λ¥ ν–¥μƒ λ‹¬μ„±
- [ ] μ‹¤μ‹κ°„ μ¶”λ΅  μ„±λ¥ ν™•λ³΄

---

## β οΈ μ£Όμμ‚¬ν•­

### **λ°μ΄ν„° κ΄€λ¦¬**
- **λ΅μ»¬ λ°±μ—…**: Macμ—μ„ μ¤‘μ” λ°μ΄ν„° λ°±μ—… μ μ§€
- **μ„λ²„ μ¤ν† λ¦¬μ§€**: 10,000κ° ν™κ²½ = ~50GB μμƒ
- **Git κ΄€λ¦¬**: λ°μ΄ν„°λ” Gitμ— ν¬ν•¨ν•μ§€ μ•μ (.gitignore μ„¤μ • μ™„λ£)

### **ν›λ ¨ μ•μ •μ„±**
- **λ©”λ¨λ¦¬ λ¨λ‹ν„°λ§**: RTX 4090 24GB VRAM ν¨μ¨μ  μ‚¬μ©
- **Checkpoint μ €μ¥**: μ •κΈ°μ μΈ λ¨λΈ μ²΄ν¬ν¬μΈνΈ
- **μ‹¤ν— μ¶”μ **: Wandbλ΅ λ¨λ“  μ‹¤ν— κΈ°λ΅

### **μ„±λ¥ μµμ ν™”**
- **Batch Size**: GPU λ©”λ¨λ¦¬μ— λ§κ² μ΅°μ •
- **Data Loading**: λ©€ν‹°ν”„λ΅μ„Έμ‹±μΌλ΅ I/O λ³‘λ© ν•΄κ²°
- **Mixed Precision**: FP16 ν›λ ¨μΌλ΅ λ©”λ¨λ¦¬ μ μ•½

---

**ν„μ¬ μƒνƒ**: μ—°κµ¬μ‹¤ μ„λ²„ μ΄κ΄€ μ¤€λΉ„ μ™„λ£ β†’ κ³§ λ¨λΈ ν›λ ¨ μ‹μ‘ π€